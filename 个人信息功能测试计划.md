# 门户管理-个人信息功能测试计划

## 1. 测试概述

### 1.1 测试目标
对门户管理功能模块中的"个人信息"菜单进行全面测试，确保所有功能正常运行，数据准确性和系统稳定性。

### 1.2 测试范围
- 个人信息查看功能
- 个人信息编辑功能
- 字段验证和数据校验
- 头像上传功能
- 界面交互和用户体验
- 数据一致性和完整性

### 1.3 测试环境
- **后端服务**: http://localhost:8082/ps-be
- **前端应用**: http://localhost:10801
- **数据库**: MariaDB (alilaoba.cn:13307/ps-bmp)
- **测试浏览器**: Chrome、Firefox、Edge

## 2. 功能模块分析

### 2.1 涉及的主要文件
- **后端实体**: `TpPersonBasicinfo.java`、`TpPersonBasicinfoVO.java`
- **后端服务**: `TpPersonBasicinfoService.java`、`PersonAccountController.java`
- **前端页面**: `profile.vue`、`profile_edit.vue`

### 2.2 主要字段清单

#### 基本信息字段
| 字段名 | 字段类型 | 是否必填 | 验证规则 | 备注 |
|--------|----------|----------|----------|---------|
| personName | String | 是 | 非空 | 姓名 |
| sex | Integer | 是 | 0-保密,1-男,2-女 | 性别 |
| idtype | String | 是 | 字典值 | 证件类型 |
| idcard | String | 是 | 非空 | 证件号 |
| birthday | String | 否 | 日期格式 | 出生日期 |
| safeprinNation | String | 否 | 字典值 | 民族 |
| phone | String | 否 | 手机号格式 | 手机号 |
| tel | String | 否 | 电话格式 | 联系电话 |
| email | String | 否 | 邮箱格式 | 邮箱 |
| office | String | 否 | - | 职位 |
| titleCode | String | 否 | 字典值 | 职称 |
| politicsCode | String | 否 | 字典值 | 政治面貌 |
| personNo | String | 否 | - | 人员编号 |
| partWorkDate | String | 否 | 日期格式 | 参加工作时间 |
| maddress | String | 否 | - | 通信地址 |
| school | String | 否 | - | 毕业学校 |
| sepcSubject | String | 否 | - | 所学专业 |
| degree | String | 否 | - | 最高学位 |
| diplomaCode | String | 否 | 字典值 | 学历 |
| checkcardNo | String | 否 | - | 执法证号 |
| resume | String | 否 | 最大200字符 | 个人简介 |
| profilePhoto | String | 否 | 图片格式 | 头像 |

## 3. 测试用例设计

### 3.1 个人信息查看功能测试

#### TC001: 正常查看个人信息
**测试目标**: 验证用户能够正常查看个人信息

**前置条件**: 
- 用户已登录系统
- 用户具有查看个人信息的权限

**测试步骤**:
1. 登录系统
2. 进入"门户管理" -> "个人信息"页面
3. 查看页面显示的个人信息

**预期结果**:
- 页面正常加载
- 所有字段正确显示
- 头像正常显示（如有）
- 信息卡片布局美观

**实际结果**: [ ]

**测试状态**: [ ] 通过 [ ] 失败 [ ] 阻塞

---

#### TC002: 空数据字段显示测试
**测试目标**: 验证空数据字段的显示处理

**前置条件**: 
- 用户已登录系统
- 用户某些字段为空值

**测试步骤**:
1. 登录系统
2. 进入个人信息页面
3. 查看空字段的显示效果

**预期结果**:
- 空字段显示为"-"或"暂无"
- 不显示null、undefined等异常值
- 页面布局不受影响

**实际结果**: [ ]

**测试状态**: [ ] 通过 [ ] 失败 [ ] 阻塞

---

### 3.2 个人信息编辑功能测试

#### TC003: 正常编辑个人信息
**测试目标**: 验证用户能够正常编辑并保存个人信息

**前置条件**: 
- 用户已登录系统
- 用户具有编辑个人信息的权限

**测试数据**:
```json
{
  "personName": "张三",
  "sex": 1,
  "idtype": "111",
  "idcard": "110101199001011234",
  "phone": "13800138000",
  "email": "zhangsan@example.com",
  "office": "软件工程师"
}
```

**测试步骤**:
1. 进入个人信息页面
2. 点击"编辑资料"按钮
3. 修改各个字段信息
4. 点击保存按钮
5. 验证保存结果

**预期结果**:
- 编辑弹框正常打开
- 所有字段可正常编辑
- 保存成功提示
- 页面数据更新正确

**实际结果**: [ ]

**测试状态**: [ ] 通过 [ ] 失败 [ ] 阻塞

---

#### TC004: 必填字段验证测试
**测试目标**: 验证必填字段的校验功能

**测试步骤**:
1. 进入编辑页面
2. 清空必填字段（姓名、性别、证件类型、证件号）
3. 尝试保存

**预期结果**:
- 显示相应的错误提示信息
- 保存操作被阻止
- 错误字段高亮显示

**实际结果**: [ ]

**测试状态**: [ ] 通过 [ ] 失败 [ ] 阻塞

---

#### TC005: 手机号格式验证测试
**测试目标**: 验证手机号格式校验功能

**测试数据**:
- 有效手机号: 13800138000, 15912345678, 18888888888
- 无效手机号: 12345678901, 1380013800, abc12345678, 138001380001

**测试步骤**:
1. 进入编辑页面
2. 分别输入有效和无效的手机号
3. 触发字段验证

**预期结果**:
- 有效手机号通过验证
- 无效手机号显示错误提示
- 错误提示信息准确

**实际结果**: [ ]

**测试状态**: [ ] 通过 [ ] 失败 [ ] 阻塞

---

#### TC006: 邮箱格式验证测试
**测试目标**: 验证邮箱格式校验功能

**测试数据**:
- 有效邮箱: test@example.com, user.name@domain.co.uk, 123@test.org
- 无效邮箱: test@, @example.com, test.example.com, test@.com

**测试步骤**:
1. 进入编辑页面
2. 分别输入有效和无效的邮箱
3. 触发字段验证

**预期结果**:
- 有效邮箱通过验证
- 无效邮箱显示错误提示
- 错误提示信息准确

**实际结果**: [ ]

**测试状态**: [ ] 通过 [ ] 失败 [ ] 阻塞

---

#### TC007: 身份证号验证测试
**测试目标**: 验证身份证号格式和逻辑校验

**测试数据**:
- 有效身份证: 110101199001011234, 320106198506162345
- 无效身份证: 12345678901234567, 110101199013011234, abc123456789012345

**测试步骤**:
1. 进入编辑页面
2. 输入不同格式的身份证号
3. 验证自动提取生日功能
4. 触发字段验证

**预期结果**:
- 有效身份证通过验证
- 自动提取并填充生日字段
- 无效身份证显示错误提示

**实际结果**: [ ]

**测试状态**: [ ] 通过 [ ] 失败 [ ] 阻塞

---

### 3.3 头像上传功能测试

#### TC008: 正常头像上传测试
**测试目标**: 验证头像上传功能

**测试数据**:
- 有效图片: test.jpg (100KB), avatar.png (500KB)
- 支持格式: .png, .jpeg, .jpg

**测试步骤**:
1. 进入编辑页面
2. 点击头像上传区域
3. 选择有效的图片文件
4. 确认上传
5. 保存个人信息

**预期结果**:
- 图片上传成功
- 头像预览正常显示
- 保存后头像更新

**实际结果**: [ ]

**测试状态**: [ ] 通过 [ ] 失败 [ ] 阻塞

---

#### TC009: 头像格式限制测试
**测试目标**: 验证头像格式限制功能

**测试数据**:
- 不支持格式: test.gif, document.pdf, file.txt

**测试步骤**:
1. 进入编辑页面
2. 尝试上传不支持格式的文件

**预期结果**:
- 显示格式不支持的错误提示
- 上传操作被阻止

**实际结果**: [ ]

**测试状态**: [ ] 通过 [ ] 失败 [ ] 阻塞

---

### 3.4 字段长度限制测试

#### TC010: 个人简介长度限制测试
**测试目标**: 验证个人简介字段长度限制

**测试数据**:
- 正常长度: "这是一段个人简介，包含基本信息。" (20字符)
- 超长文本: 201个字符的文本

**测试步骤**:
1. 进入编辑页面
2. 在个人简介字段输入超长文本
3. 尝试保存

**预期结果**:
- 输入框限制最大200字符
- 超长文本被截断或提示错误
- 字符计数器正常显示

**实际结果**: [ ]

**测试状态**: [ ] 通过 [ ] 失败 [ ] 阻塞

---

### 3.5 下拉选择字段测试

#### TC011: 字典数据加载测试
**测试目标**: 验证下拉选择字段的字典数据加载

**涉及字段**:
- 证件类型 (Y24)
- 民族 (Y26)
- 职称 (SYS12)
- 政治面貌 (SYS13)
- 学历 (SYS14)

**测试步骤**:
1. 进入编辑页面
2. 点击各个下拉选择框
3. 查看选项数据

**预期结果**:
- 所有下拉框正常加载数据
- 选项内容正确
- 可正常选择和清空

**实际结果**: [ ]

**测试状态**: [ ] 通过 [ ] 失败 [ ] 阻塞

---

### 3.6 日期字段测试

#### TC012: 日期选择器测试
**测试目标**: 验证日期选择器功能

**涉及字段**:
- 出生日期
- 参加工作时间

**测试步骤**:
1. 进入编辑页面
2. 点击日期选择器
3. 选择不同的日期
4. 验证日期格式

**预期结果**:
- 日期选择器正常打开
- 日期格式为YYYY-MM-DD
- 存储格式为YYYYMMDD
- 可正常清空

**实际结果**: [ ]

**测试状态**: [ ] 通过 [ ] 失败 [ ] 阻塞

---

### 3.7 数据一致性测试

#### TC013: 编辑前后数据一致性测试
**测试目标**: 验证编辑操作的数据一致性

**测试步骤**:
1. 记录编辑前的所有字段值
2. 进入编辑页面
3. 不做任何修改，直接保存
4. 对比编辑前后的数据

**预期结果**:
- 所有字段值保持不变
- 修改时间字段更新
- 修改人字段更新为当前用户

**实际结果**: [ ]

**测试状态**: [ ] 通过 [ ] 失败 [ ] 阻塞

---

#### TC014: 并发编辑测试
**测试目标**: 验证多用户同时编辑的处理

**测试步骤**:
1. 用户A打开编辑页面
2. 用户B同时打开编辑页面
3. 用户A先保存修改
4. 用户B再保存修改

**预期结果**:
- 系统能正确处理并发编辑
- 最后保存的数据生效
- 或提供冲突提示

**实际结果**: [ ]

**测试状态**: [ ] 通过 [ ] 失败 [ ] 阻塞

---

### 3.8 界面交互测试

#### TC015: 响应式布局测试
**测试目标**: 验证不同屏幕尺寸下的界面显示

**测试环境**:
- 桌面端: 1920x1080, 1366x768
- 平板端: 768x1024
- 手机端: 375x667

**测试步骤**:
1. 在不同尺寸屏幕下打开个人信息页面
2. 测试编辑功能
3. 验证界面元素布局

**预期结果**:
- 界面在不同尺寸下正常显示
- 所有功能可正常使用
- 布局美观，无元素重叠

**实际结果**: [ ]

**测试状态**: [ ] 通过 [ ] 失败 [ ] 阻塞

---

#### TC016: 浏览器兼容性测试
**测试目标**: 验证不同浏览器的兼容性

**测试浏览器**:
- Chrome (最新版本)
- Firefox (最新版本)
- Edge (最新版本)
- Safari (如有Mac环境)

**测试步骤**:
1. 在不同浏览器中打开个人信息页面
2. 测试所有功能
3. 对比显示效果

**预期结果**:
- 所有浏览器中功能正常
- 界面显示一致
- 无JavaScript错误

**实际结果**: [ ]

**测试状态**: [ ] 通过 [ ] 失败 [ ] 阻塞

---

### 3.9 性能测试

#### TC017: 页面加载性能测试
**测试目标**: 验证页面加载性能

**测试步骤**:
1. 清空浏览器缓存
2. 打开个人信息页面
3. 记录加载时间
4. 重复测试10次

**预期结果**:
- 页面加载时间 < 3秒
- 接口响应时间 < 1秒
- 无明显卡顿现象

**实际结果**: [ ]

**测试状态**: [ ] 通过 [ ] 失败 [ ] 阻塞

---

#### TC018: 大数据量处理测试
**测试目标**: 验证大量数据的处理能力

**测试数据**:
- 个人简介: 200字符满额文本
- 通信地址: 长地址信息

**测试步骤**:
1. 填入大量数据
2. 保存并查看
3. 多次编辑保存

**预期结果**:
- 大数据量正常处理
- 保存和显示无异常
- 性能无明显下降

**实际结果**: [ ]

**测试状态**: [ ] 通过 [ ] 失败 [ ] 阻塞

---

### 3.10 安全性测试

#### TC019: 输入安全性测试
**测试目标**: 验证输入数据的安全性处理

**测试数据**:
- XSS攻击: `<script>alert('xss')</script>`
- SQL注入: `'; DROP TABLE users; --`
- 特殊字符: `<>&"'`

**测试步骤**:
1. 在各个输入框中输入恶意代码
2. 保存数据
3. 查看显示结果

**预期结果**:
- 恶意代码被正确转义或过滤
- 不执行恶意脚本
- 数据库安全不受影响

**实际结果**: [ ]

**测试状态**: [ ] 通过 [ ] 失败 [ ] 阻塞

---

#### TC020: 权限控制测试
**测试目标**: 验证用户权限控制

**测试步骤**:
1. 使用不同权限的用户登录
2. 尝试访问个人信息功能
3. 尝试编辑他人信息

**预期结果**:
- 无权限用户无法访问
- 用户只能编辑自己的信息
- 权限控制正确生效

**实际结果**: [ ]

**测试状态**: [ ] 通过 [ ] 失败 [ ] 阻塞

---

## 4. 测试数据准备

### 4.1 基础测试数据

```sql
-- 测试用户数据
INSERT INTO tp_person_basicinfo (
    PERSON_ID, PERSON_NAME, SEX, IDTYPE, IDCARD, PHONE, EMAIL, 
    OFFICE, ACTIVED, CATEGORY, ASCN_ID, CREATOR, CREATE_TIME
) VALUES (
    'TEST_USER_001', '测试用户001', 1, '111', '110101199001011234', 
    '13800138000', 'test001@example.com', '软件工程师', 1, 0, 
    'DEPT_001', 'ADMIN', NOW()
);

-- 测试部门数据
INSERT INTO tp_dept_basicinfo (
    DEPT_ID, DEPT_NAME, DEPT_FULL_NAME, PARENT_ID, DEPT_TYPE
) VALUES (
    'DEPT_001', '测试部门', '公司/测试部门', 'ROOT', '1'
);
```

### 4.2 边界值测试数据

| 测试场景 | 字段 | 测试值 | 预期结果 |
|----------|------|--------|----------|
| 最小长度 | personName | "张" | 通过 |
| 最大长度 | personName | 50个字符 | 通过 |
| 超长输入 | personName | 51个字符 | 失败 |
| 空值测试 | phone | "" | 通过 |
| 格式测试 | phone | "138001380001" | 失败 |
| 邮箱测试 | email | "test@" | 失败 |
| 简介长度 | resume | 200个字符 | 通过 |
| 简介超长 | resume | 201个字符 | 失败 |

### 4.3 字典数据验证

```sql
-- 验证字典数据完整性
SELECT * FROM tp_dictionary WHERE PDIC_CODE IN ('Y24', 'Y26', 'SYS12', 'SYS13', 'SYS14');
```

## 5. 测试执行计划

### 5.1 测试阶段划分

| 阶段 | 测试内容 | 预计时间 | 负责人 |
|------|----------|----------|--------|
| 第一阶段 | 基础功能测试 (TC001-TC007) | 2天 | 测试工程师A |
| 第二阶段 | 高级功能测试 (TC008-TC014) | 2天 | 测试工程师B |
| 第三阶段 | 界面和性能测试 (TC015-TC018) | 1天 | 测试工程师A |
| 第四阶段 | 安全性测试 (TC019-TC020) | 1天 | 安全测试工程师 |

### 5.2 测试环境准备

1. **数据库准备**
   - 备份生产数据
   - 准备测试数据
   - 配置测试环境连接

2. **应用服务准备**
   - 部署最新代码
   - 配置测试参数
   - 启动相关服务

3. **测试工具准备**
   - 浏览器开发者工具
   - 网络监控工具
   - 数据库查询工具

## 6. 缺陷管理

### 6.1 缺陷等级定义

| 等级 | 定义 | 示例 |
|------|------|------|
| 严重 | 功能完全无法使用 | 页面无法加载、保存失败 |
| 高 | 主要功能异常 | 必填验证失效、数据丢失 |
| 中 | 次要功能异常 | 格式验证不准确、界面显示问题 |
| 低 | 界面美观性问题 | 样式错位、文字错误 |

### 6.2 缺陷报告模板

```
缺陷ID: BUG_PROFILE_001
缺陷标题: [个人信息] 手机号格式验证失效
缺陷等级: 高
发现时间: 2024-01-15 10:30
测试用例: TC005

复现步骤:
1. 进入个人信息编辑页面
2. 输入无效手机号"12345"
3. 点击保存按钮

预期结果: 显示手机号格式错误提示
实际结果: 保存成功，无任何提示

测试环境: Chrome 120.0, Windows 10
附件: screenshot.png
```

## 7. 测试报告

### 7.1 测试总结模板

```
测试项目: 个人信息功能测试
测试时间: 2024-01-15 ~ 2024-01-19
测试版本: v1.0.0

测试概况:
- 计划测试用例: 20个
- 实际执行用例: 20个
- 通过用例: 18个
- 失败用例: 2个
- 阻塞用例: 0个

缺陷统计:
- 严重缺陷: 0个
- 高级缺陷: 1个
- 中级缺陷: 2个
- 低级缺陷: 1个

测试结论:
个人信息功能基本满足需求，存在少量缺陷需要修复。
建议修复高级和中级缺陷后发布。
```

### 7.2 测试通过标准

1. **功能完整性**: 所有核心功能正常工作
2. **数据准确性**: 数据保存和显示准确无误
3. **验证有效性**: 所有字段验证规则生效
4. **界面友好性**: 界面操作流畅，用户体验良好
5. **性能达标**: 页面加载和操作响应时间符合要求
6. **安全可靠**: 无安全漏洞，权限控制正确

## 8. 风险评估

### 8.1 测试风险

| 风险项 | 风险等级 | 影响 | 应对措施 |
|--------|----------|------|----------|
| 测试数据不足 | 中 | 测试覆盖不全 | 提前准备充足测试数据 |
| 环境不稳定 | 高 | 测试无法进行 | 建立稳定测试环境 |
| 需求变更 | 中 | 测试用例需调整 | 及时沟通，更新测试用例 |
| 时间不足 | 高 | 测试不充分 | 优先测试核心功能 |

### 8.2 质量风险

| 风险项 | 可能性 | 影响度 | 风险值 | 应对策略 |
|--------|--------|--------|--------|----------|
| 数据丢失 | 低 | 高 | 中 | 加强数据备份和恢复测试 |
| 性能问题 | 中 | 中 | 中 | 进行充分的性能测试 |
| 安全漏洞 | 低 | 高 | 中 | 执行安全测试用例 |
| 兼容性问题 | 中 | 低 | 低 | 多浏览器测试 |

## 9. 附录

### 9.1 相关文档
- 需求规格说明书
- 系统设计文档
- 接口文档
- 数据库设计文档

### 9.2 测试工具
- Chrome DevTools
- Postman (接口测试)
- MySQL Workbench
- 截图工具

### 9.3 联系人
- 产品经理: [姓名] [邮箱]
- 开发负责人: [姓名] [邮箱]
- 测试负责人: [姓名] [邮箱]

---

**文档版本**: v1.0  
**创建日期**: 2024-01-15  
**最后更新**: 2024-01-15  
**创建人**: 测试团队