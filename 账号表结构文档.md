# 账号表结构文档 (tp_account)

## 表基本信息
- **表名**: tp_account
- **存储引擎**: InnoDB
- **字符集**: utf8mb4
- **排序规则**: utf8mb4_unicode_ci
- **用途**: 存储系统用户账号信息

## 字段详细信息

| 字段名 | 数据类型 | 长度 | 是否为空 | 默认值 | 索引 | 说明 |
|--------|----------|------|----------|--------|------|------|
| ACCOUNT_ID | varchar | 36 | YES | NULL | UNIQUE | 账号唯一标识符 |
| USERNAME | varchar | 150 | YES | NULL | - | 用户名 |
| USERPWD | varchar | 500 | YES | NULL | - | 用户密码（加密存储） |
| PHONE | varchar | 50 | YES | NULL | - | 手机号码 |
| EXPIRED_TIME | varchar | 14 | YES | NULL | - | 账号过期时间 |
| LOCKED | int | 11 | YES | NULL | - | 账号锁定状态（0:未锁定, 1:已锁定） |
| ENABLED | int | 11 | YES | NULL | - | 账号启用状态（0:禁用, 1:启用） |
| PERSON_ID | varchar | 36 | YES | NULL | - | 关联人员ID |
| TENANT_ID | varchar | 36 | YES | NULL | - | 租户ID（多租户支持） |
| WEIXIN | varchar | 50 | YES | NULL | - | 微信账号 |
| DINGDING | varchar | 50 | YES | NULL | - | 钉钉账号 |
| ZHELIBAN | varchar | 50 | YES | NULL | - | 浙里办账号 |
| THREE_ID | varchar | 50 | YES | NULL | - | 第三方账号ID |
| keycloak_id | varchar | 200 | YES | NULL | - | Keycloak用户ID |
| VERIFICATION_CODE | varchar | 100 | YES | NULL | - | 验证码 |
| ACTIVED | int | 11 | YES | NULL | - | 激活状态（0:未激活, 1:已激活） |
| CREATE_TIME | varchar | 14 | YES | NULL | - | 创建时间 |
| UPDATE_TIME | varchar | 14 | YES | NULL | - | 更新时间 |
| last_password_change_time | datetime | - | YES | NULL | INDEX | 上次密码修改时间 |
| EXTEND01 | varchar | 150 | YES | NULL | - | 扩展字段1 |
| EXTEND02 | varchar | 150 | YES | NULL | - | 扩展字段2 |
| EXTEND03 | varchar | 150 | YES | NULL | - | 扩展字段3 |

## 索引信息

### 唯一索引
- **ACCOUNT_ID**: 账号ID唯一索引，确保账号ID的唯一性

### 普通索引
- **idx_last_password_change_time**: 密码修改时间索引，用于密码策略查询优化

## 约束条件

1. **ACCOUNT_ID**: 唯一约束，不允许重复
2. **所有字段**: 允许为空值（NULL）
3. **字符编码**: 统一使用 utf8mb4_unicode_ci 排序规则

## 业务说明

### 账号状态管理
- **LOCKED**: 控制账号是否被锁定
- **ENABLED**: 控制账号是否启用
- **ACTIVED**: 控制账号是否已激活

### 第三方集成
- **keycloak_id**: 与Keycloak身份认证系统集成
- **WEIXIN**: 微信登录集成
- **DINGDING**: 钉钉登录集成
- **ZHELIBAN**: 浙里办登录集成
- **THREE_ID**: 其他第三方系统集成

### 多租户支持
- **TENANT_ID**: 支持多租户架构，不同租户的用户数据隔离

### 密码安全
- **USERPWD**: 密码字段长度500字符，支持复杂加密算法
- **last_password_change_time**: 记录密码修改时间，支持密码策略管理
- **VERIFICATION_CODE**: 支持验证码功能

### 扩展性
- **EXTEND01/02/03**: 预留扩展字段，支持业务扩展需求

## 相关表关联

- **tp_person_basicinfo**: 通过 PERSON_ID 关联人员基本信息
- **tp_account_exinfo**: 账号扩展信息表
- **tp_account_third**: 第三方账号关联表

## 注意事项

1. 所有时间字段使用varchar(14)格式存储，格式为：YYYYMMDDHHMMSS
2. 密码字段已加密存储，不可明文查看
3. 账号ID使用36位UUID格式
4. 支持多种第三方登录方式集成
5. 具备完整的账号状态管理机制

---

**文档生成时间**: $(Get-Date -Format "yyyy-MM-dd HH:mm:ss")
**数据库**: ps-bmp
**表引擎**: InnoDB
**字符集**: utf8mb4