/* debugger.js | 2022-06-20 19:39:46 | lincong1987@gmail.com */var _d_e_f_i_n_e_="define(function(){})",FontInspector=function(){function e(){for(var e=document.querySelectorAll("div["+r+"]"),t=0,n=e.length;t<n;++t){e[t].className="debuggerHideText"}}function t(e,t){for(var n=document.querySelectorAll("div["+r+"="+e+"]"),a=0,i=n.length;a<i;++a){n[a].className=t?"debuggerShowText":"debuggerHideText"}}function n(e){if(e.target.dataset.fontName&&"DIV"===e.target.tagName.toUpperCase())for(var n=e.target.dataset.fontName,a=document.getElementsByTagName("input"),i=0;i<a.length;++i){var r=a[i];if(r.dataset.fontName===n)r.checked=!r.checked,t(n,r.checked),r.scrollIntoView()}}var a,i=!1,r="data-font-name";return{"id":"FontInspector","name":"Font Inspector","panel":null,"manager":null,"init":function(){var t=this.panel;t.setAttribute("style","padding: 5px;");var n=document.createElement("button");n.addEventListener("click",e),n.textContent="Refresh",t.appendChild(n),a=document.createElement("div"),t.appendChild(a)},"cleanup":function(){a.textContent=""},"enabled":!1,get"active"(){return i},set"active"(t){if(i=t)document.body.addEventListener("click",n,!0),e();else document.body.removeEventListener("click",n,!0),function(){for(var e=document.querySelectorAll("div["+r+"]"),t=0,n=e.length;t<n;++t)e[t].className=""}()},"fontAdded":function(n,i){var r=function(e,t){for(var n=document.createElement("table"),a=0;a<t.length;a++){var i=document.createElement("tr"),r=document.createElement("td");r.textContent=t[a],i.appendChild(r);var d=document.createElement("td");d.textContent=e[t[a]].toString(),i.appendChild(d),n.appendChild(i)}return n}(n,["name","type"]),d=n.loadedName,l=document.createElement("div"),o=document.createElement("span");o.textContent=d;var s=document.createElement("a");if(i)i=/url\(['"]?([^\)"']+)/.exec(i),s.href=i[1];else if(n.data)i=URL.createObjectURL(new Blob([n.data],{"type":n.mimeType})),s.href=i;s.textContent="Download";var c=document.createElement("a");c.href="",c.textContent="Log",c.addEventListener("click",function(e){e.preventDefault(),console.log(n)});var p=document.createElement("input");p.setAttribute("type","checkbox"),p.dataset.fontName=d,p.addEventListener("click",function(e,n){return function(){t(n,e.checked)}}(p,d)),l.appendChild(p),l.appendChild(o),l.appendChild(document.createTextNode(" ")),l.appendChild(s),l.appendChild(document.createTextNode(" ")),l.appendChild(c),l.appendChild(r),a.appendChild(l),setTimeout(function(){if(this.active)e()}.bind(this),2e3)}}}(),StepperManager=function(){var e=[],t=null,n=null,a=null,i={};return{"id":"Stepper","name":"Stepper","panel":null,"manager":null,"init":function(){var e=this;if(this.panel.setAttribute("style","padding: 5px;"),n=document.createElement("div"),(a=document.createElement("select")).addEventListener("change",function(t){e.selectStepper(this.value)}),n.appendChild(a),t=document.createElement("div"),this.panel.appendChild(n),this.panel.appendChild(t),sessionStorage.getItem("pdfjsBreakPoints"))i=JSON.parse(sessionStorage.getItem("pdfjsBreakPoints"))},"cleanup":function(){a.textContent="",t.textContent="",e=[]},"enabled":!1,"active":!1,"create":function(n){var r=document.createElement("div");r.id="stepper"+n,r.setAttribute("hidden",!0),r.className="stepper",t.appendChild(r);var d=document.createElement("option");d.textContent="Page "+(n+1),d.value=n,a.appendChild(d);var l=i[n]||[],o=new Stepper(r,n,l);if(e.push(o),1===e.length)this.selectStepper(n,!1);return o},"selectStepper":function(t,n){var i;if(t|=0,n)this.manager.selectPanel(this);for(i=0;i<e.length;++i){var r=e[i];if(r.pageIndex===t)r.panel.removeAttribute("hidden");else r.panel.setAttribute("hidden",!0)}var d=a.options;for(i=0;i<d.length;++i){var l=d[i];l.selected=(0|l.value)===t}},"saveBreakPoints":function(e,t){i[e]=t,sessionStorage.setItem("pdfjsBreakPoints",JSON.stringify(i))}}}(),Stepper=function(){function e(e,t){var n=document.createElement(e);if(t)n.textContent=t;return n}function t(e){if("string"==typeof e){return e.length<=75?e:e.substr(0,75)+"..."}if("object"!=typeof e||null===e)return e;if("length"in e){var n,a,i=[];for(n=0,a=Math.min(10,e.length);n<a;n++)i.push(t(e[n]));if(n<e.length)i.push("...");return i}var r={};for(var d in e)r[d]=t(e[d]);return r}function n(e,t,n){this.panel=e,this.breakPoint=0,this.nextBreakPoint=null,this.pageIndex=t,this.breakPoints=n,this.currentIdx=-1,this.operatorListIdx=0}var a=null;return n.prototype={"init":function(){var t=this.panel,n=e("div","c=continue, s=step"),i=e("table");n.appendChild(i),i.cellSpacing=0;var r=e("tr");if(i.appendChild(r),r.appendChild(e("th","Break")),r.appendChild(e("th","Idx")),r.appendChild(e("th","fn")),r.appendChild(e("th","args")),t.appendChild(n),this.table=i,!a){a=Object.create(null);for(var d in PDFJS.OPS)a[PDFJS.OPS[d]]=d}},"updateOperatorList":function(n){function i(){var e=+this.dataset.idx;if(this.checked)r.breakPoints.push(e);else r.breakPoints.splice(r.breakPoints.indexOf(e),1);StepperManager.saveBreakPoints(r.pageIndex,r.breakPoints)}var r=this;if(!(this.operatorListIdx>15e3)){for(var d=document.createDocumentFragment(),l=Math.min(15e3,n.fnArray.length),o=this.operatorListIdx;o<l;o++){var s=e("tr");s.className="line",s.dataset.idx=o,d.appendChild(s);var c=-1!==this.breakPoints.indexOf(o),p=n.argsArray[o]||[],u=e("td"),h=e("input");h.type="checkbox",h.className="points",h.checked=c,h.dataset.idx=o,h.onclick=i,u.appendChild(h),s.appendChild(u),s.appendChild(e("td",o.toString()));var f=a[n.fnArray[o]],v=p;if("showText"===f){for(var m=p[0],g=[],C=[],b=0;b<m.length;b++){var x=m[b];if("object"==typeof x&&null!==x)C.push(x.fontChar);else{if(C.length>0)g.push(C.join("")),C=[];g.push(x)}}if(C.length>0)g.push(C.join(""));v=[g]}s.appendChild(e("td",f)),s.appendChild(e("td",JSON.stringify(t(v))))}if(l<n.fnArray.length){s=e("tr");var k=e("td","...");k.colspan=4,d.appendChild(k)}this.operatorListIdx=n.fnArray.length,this.table.appendChild(d)}},"getNextBreakPoint":function(){this.breakPoints.sort(function(e,t){return e-t});for(var e=0;e<this.breakPoints.length;e++)if(this.breakPoints[e]>this.currentIdx)return this.breakPoints[e];return null},"breakIt":function(e,t){StepperManager.selectStepper(this.pageIndex,!0);var n=this,a=document;n.currentIdx=e;var i=function(e){switch(e.keyCode){case 83:a.removeEventListener("keydown",i,!1),n.nextBreakPoint=n.currentIdx+1,n.goTo(-1),t();break;case 67:a.removeEventListener("keydown",i,!1);var r=n.getNextBreakPoint();n.nextBreakPoint=r,n.goTo(-1),t()}};a.addEventListener("keydown",i,!1),n.goTo(e)},"goTo":function(e){for(var t=this.panel.getElementsByClassName("line"),n=0,a=t.length;n<a;++n){var i=t[n];if((0|i.dataset.idx)===e)i.style.backgroundColor="rgb(251,250,207)",i.scrollIntoView();else i.style.backgroundColor=null}}},n}(),Stats=function(){function e(e){for(;e.hasChildNodes();)e.removeChild(e.lastChild)}var t=[];return{"id":"Stats","name":"Stats","panel":null,"manager":null,"init":function(){this.panel.setAttribute("style","padding: 5px;"),PDFJS.enableStats=!0},"enabled":!1,"active":!1,"add":function(n,a){if(a){var i=function(e){for(var n=0,a=t.length;n<a;++n)if(t[n].pageNumber===e)return n;return!1}(n);if(!1!==i){var r=t[i];this.panel.removeChild(r.div),t.splice(i,1)}var d=document.createElement("div");d.className="stats";var l=document.createElement("div");l.className="title",l.textContent="Page: "+n;var o=document.createElement("div");o.textContent=a.toString(),d.appendChild(l),d.appendChild(o),t.push({"pageNumber":n,"div":d}),t.sort(function(e,t){return e.pageNumber-t.pageNumber}),e(this.panel);for(var s=0,c=t.length;s<c;++s)this.panel.appendChild(t[s].div)}},"cleanup":function(){t=[],e(this.panel)}}}(),PDFBug=function(){var e=[],t=null;return{"tools":[FontInspector,StepperManager,Stats],"enable":function(e){var t=!1,n=this.tools;if(1===e.length&&"all"===e[0])t=!0;for(var a=0;a<n.length;++a){var i=n[a];if(t||-1!==e.indexOf(i.id))i.enabled=!0}if(!t)n.sort(function(t,a){var i=e.indexOf(t.id);i=i<0?n.length:i;var r=e.indexOf(a.id);return r=r<0?n.length:r,i-r})},"init":function(){var t=document.createElement("div");t.id="PDFBug";var n=document.createElement("div");n.setAttribute("class","controls"),t.appendChild(n);var a=document.createElement("div");a.setAttribute("class","panels"),t.appendChild(a);var i=document.getElementById("viewerContainer");i.appendChild(t),i.style.right="300px";for(var r=this.tools,d=this,l=0;l<r.length;++l){var o=r[l],s=document.createElement("div"),c=document.createElement("button");if(c.textContent=o.name,c.addEventListener("click",function(e){return function(t){t.preventDefault(),d.selectPanel(e)}}(l)),n.appendChild(c),a.appendChild(s),o.panel=s,o.manager=this,o.enabled)o.init();else s.textContent=o.name+' is disabled. To enable add  "'+o.id+'" to the pdfBug parameter and refresh (seperate multiple by commas).';e.push(c)}this.selectPanel(0)},"cleanup":function(){for(var e=0,t=this.tools.length;e<t;e++)if(this.tools[e].enabled)this.tools[e].cleanup()},"selectPanel":function(n){if("number"!=typeof n)n=this.tools.indexOf(n);if(n!==t){t=n;for(var a=this.tools,i=0;i<a.length;++i)if(i===n)e[i].setAttribute("class","active"),a[i].active=!0,a[i].panel.removeAttribute("hidden");else e[i].setAttribute("class",""),a[i].active=!1,a[i].panel.setAttribute("hidden","true")}}}}();
//# sourceMappingURL=debugger.min.map